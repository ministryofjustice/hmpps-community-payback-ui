{% extends "../partials/layout.njk" %}

{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "../showErrorSummary.njk" import showErrorSummary %}

{% set pageTitle = applicationName + " - Track progress on Community Payback" %}
{% set mainClasses = "app-container govuk-body" %}

{% block content %}

  {{ showErrorSummary(errorSummary) }}

  <h1>Track progress on Community Payback</h1>

  <form action="{{ paths.sessions.search() }}" method="get" class="search-and-filter">


    <h2 class="govuk-heading-m">Find a session</h2>

<h3 class="govuk-heading-s">Region</h3>
    <div class="search-and-filter__row">
    
    <p>{{ provider.name }}
    <input type="hidden" name="provider" value="{{ provider.code }}">
    <a href="{{ paths.sessions.start() }}">Change</a>
    </div>
<div class="search-and-filter__row">
      {{ govukSelect({
          label: {
              text: "Team",
              classes: "govuk-label--s"
          },
          id: "team",
          name: "team",
          items: teamItems,
          errorMessage: errors.team
      }) }}
    </div>

    <div class="search-and-filter__row">

    {{ govukDateInput({
      id: "startDate",
      namePrefix: "startDate",
      fieldset: {
        legend: {
          text: "From",
          classes: "govuk-!-font-weight-bold"
        }
      },
      items: startDateItems,
      errorMessage: errors['startDate-day']
    }) }}

    {{ govukDateInput({
      id: "endDate",
      namePrefix: "endDate",
      fieldset: {
        legend: {
          text: "To",
          classes: "govuk-!-font-weight-bold"
        }
      },
      items: endDateItems,
      errorMessage: errors['endDate-day']
    }) }}

    {{ govukButton({
      "name": "submit",
      "text": "Search",
      preventDoubleClick: true
    }) }}
    </div>

  </form>

  {% if sessionRows | length %}
    {% include "./_table.njk" %}
  {% endif %}

{% endblock %}
