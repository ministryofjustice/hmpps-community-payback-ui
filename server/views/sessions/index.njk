{% extends "../partials/layout.njk" %}

{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "../showErrorSummary.njk" import showErrorSummary %}

{% set pageTitle = applicationName + " - Find a group session" %}
{% set mainClasses = "app-container govuk-body" %}

{% block content %}

  {{ showErrorSummary(errorSummary) }}

  <h1>Find a group session</h1>

  <form action="{{ paths.sessions.search() }}" method="get" class="search-and-filter">

    <h2 class="govuk-heading-m">Filter group sessions</h2>

    <div class="search-and-filter__row">
      {{ govukSelect({
          label: {
              text: "Region",
              classes: "govuk-label--s"
          },
          id: "provider",
          name: "provider",
          items: [{
              value: "1000",
              text: "East of England"
            }]
          }) }}

      {{ govukSelect({
          label: {
              text: "Team",
              classes: "govuk-label--s"
          },
          id: "team",
          name: "team",
          items: teamItems,
          errorMessage: errors.team
      }) }}
    </div>

    <div class="search-and-filter__row">

    {{ govukDateInput({
      id: "startDate",
      namePrefix: "startDate",
      fieldset: {
        legend: {
          text: "From",
          classes: "govuk-!-font-weight-bold"
        }
      },
      items: startDateItems,
      errorMessage: errors['startDate-day']
    }) }}

    {{ govukDateInput({
      id: "endDate",
      namePrefix: "endDate",
      fieldset: {
        legend: {
          text: "To",
          classes: "govuk-!-font-weight-bold"
        }
      },
      items: endDateItems,
      errorMessage: errors['endDate-day']
    }) }}

    {{ govukButton({
      "name": "submit",
      "text": "Search",
      preventDoubleClick: true
    }) }}
    </div>

  </form>

  {% if showNoResultsMessage %}
    <h2>No results found</h2>

    <p>There are no results that match your search. Try searching again using different search criteria.</p>
  {% endif %}

  {% if sessionRows | length %}
    {% include "./_table.njk" %}
  {% endif %}

{% endblock %}
