{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% macro teamFilter(form, errors, searchPath, regionPath, title="Filter results") %}
  <div class="search-and-filter">
    <h2 class="govuk-heading-m">{{ title }}</h2>
    {% if form.providerItems %}
      <form action="{{ regionPath }}" method="get" class="govuk-!-margin-bottom-5">
        <div class="search-and-filter__row">
          {{ govukSelect({
            label: {
                text: "Region",
                classes: "govuk-label--s"
            },
            id: "provider",
            name: "provider",
            items: form.providerItems
          }) }}
          {{ govukButton({
            "text": "Apply",
            preventDoubleClick: true
          }) }}
        </div>
      </form>
    {% else %}
      <label class="govuk-label govuk-label--s">Region</label>
      <p class="govuk-body">{{ form.provider.text }}</p>
    {% endif %}
    <form action="{{ searchPath }}" method="get">
      <div class="search-and-filter__row">
        <input type="hidden" name="provider" value="{{ form.provider.value }}" />
        {{ govukSelect({
            label: {
                text: "Team",
                classes: "govuk-label--s"
            },
            id: "team",
            name: "team",
            items: form.teamItems,
            errorMessage: errors.team,
            disabled: form.provider.value == undefined
        }) }}
      </div>

      {{ caller() }}

      <div class="search-and-filter__row">
        {{ govukButton({
          "name": "submit",
          "text": "Search",
          preventDoubleClick: true
        }) }}
      </div>
    </form>
  </div>
{% endmacro %}